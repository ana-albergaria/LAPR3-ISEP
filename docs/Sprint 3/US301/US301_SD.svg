<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1719px" preserveAspectRatio="none" style="width:2633px;height:1719px;background:#FFFFFF;" version="1.1" viewBox="0 0 2633 1719" width="2633px" zoomAndPan="magnify"><defs><filter height="300%" id="fmtsofexcks0b" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="1518.8047" style="stroke:#A80036;stroke-width:1.0;" width="10" x="59.5" y="98.2969"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="1482.5391" style="stroke:#A80036;stroke-width:1.0;" width="10" x="481.5" y="134.5625"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="1424.2734" style="stroke:#A80036;stroke-width:1.0;" width="10" x="727.5" y="163.6953"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1023.5" y="192.8281"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1023.5" y="352.3594"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1023.5" y="650.6172"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1023.5" y="989.8438"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="71.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1172.5" y="251.9609"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="119.7266" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1424.5" y="435.625"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1424.5" y="584.4844"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1424.5" y="923.7109"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1424.5" y="1222.7734"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1424.5" y="1342.1719"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1424.5" y="1401.3047"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="258.9609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1547.5" y="709.75"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="225.125" style="stroke:#000000;stroke-width:2.0;" width="1946" x="597.5" y="397.3594"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="104.5625" style="stroke:#000000;stroke-width:2.0;" width="883.5" x="1488" y="766.8828"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="76.2656" style="stroke:#000000;stroke-width:2.0;" width="900.5" x="597.5" y="885.4453"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="106.5313" style="stroke:#000000;stroke-width:2.0;" width="2022" x="587.5" y="1063.9766"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="2002" x="597.5" y="1117.2422"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="375.3281" style="stroke:#000000;stroke-width:2.0;" width="2042" x="577.5" y="1184.5078"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="2002" x="597.5" y="1267.7734"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="77.3984" style="stroke:#000000;stroke-width:2.0;" width="2022" x="587.5" y="1475.4375"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="2002" x="597.5" y="1499.5703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="64" x2="64" y1="88.2969" y2="1635.1016"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="486" x2="486" y1="88.2969" y2="1635.1016"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="732.5" x2="732.5" y1="88.2969" y2="1635.1016"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1028" x2="1028" y1="88.2969" y2="1635.1016"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1177" x2="1177" y1="88.2969" y2="1635.1016"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1429" x2="1429" y1="88.2969" y2="1635.1016"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1552" x2="1552" y1="88.2969" y2="1635.1016"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2335.5" x2="2335.5" y1="816.6641" y2="1635.1016"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2407.5" x2="2407.5" y1="476.2734" y2="1635.1016"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2493.5" x2="2493.5" y1="521.5703" y2="1635.1016"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2566.5" x2="2566.5" y1="88.2969" y2="1635.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="5" y="84.9951">Traffic Manager</text><ellipse cx="64.5" cy="15" fill="#FEFECE" filter="url(#fmtsofexcks0b)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M64.5,23 L64.5,50 M51.5,31 L77.5,31 M64.5,50 L51.5,65 M64.5,50 L77.5,65 " fill="none" filter="url(#fmtsofexcks0b)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="5" y="1647.0967">Traffic Manager</text><ellipse cx="64.5" cy="1660.3984" fill="#FEFECE" filter="url(#fmtsofexcks0b)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M64.5,1668.3984 L64.5,1695.3984 M51.5,1676.3984 L77.5,1676.3984 M64.5,1695.3984 L51.5,1710.3984 M64.5,1695.3984 L77.5,1710.3984 " fill="none" filter="url(#fmtsofexcks0b)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="197" x="386" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="393" y="72.9951">:CreateFreightNetworkUI</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="197" x="386" y="1634.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="393" y="1654.0967">:CreateFreightNetworkUI</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="246" x="607.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="232" x="614.5" y="72.9951">:CreateFreightNetworkController</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="246" x="607.5" y="1634.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="232" x="614.5" y="1654.0967">:CreateFreightNetworkController</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="87" x="983" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="990" y="72.9951">:Company</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="87" x="983" y="1634.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="990" y="1654.0967">:Company</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="133" x="1109" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="1116" y="72.9951">:CountryStoreDb</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="133" x="1109" y="1634.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="1116" y="1654.0967">:CountryStoreDb</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="113" x="1371" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="1378" y="72.9951">:CountryStore</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="113" x="1371" y="1634.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="1378" y="1654.0967">:CountryStore</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="105" x="1498" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="1505" y="72.9951">:PortStoreDb</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="105" x="1498" y="1634.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="1505" y="1654.0967">:PortStoreDb</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="47" x="2310.5" y="1634.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="2317.5" y="1654.0967">:Port</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="69" x="2371.5" y="1634.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="2378.5" y="1654.0967">:Capital</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="75" x="2454.5" y="1634.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="2461.5" y="1654.0967">:Country</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="42" x="2543.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="2550.5" y="72.9951">NET</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="42" x="2543.5" y="1634.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="2550.5" y="1654.0967">NET</text><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="1518.8047" style="stroke:#A80036;stroke-width:1.0;" width="10" x="59.5" y="98.2969"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="1482.5391" style="stroke:#A80036;stroke-width:1.0;" width="10" x="481.5" y="134.5625"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="1424.2734" style="stroke:#A80036;stroke-width:1.0;" width="10" x="727.5" y="163.6953"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1023.5" y="192.8281"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1023.5" y="352.3594"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1023.5" y="650.6172"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1023.5" y="989.8438"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="71.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1172.5" y="251.9609"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="119.7266" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1424.5" y="435.625"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1424.5" y="584.4844"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1424.5" y="923.7109"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1424.5" y="1222.7734"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1424.5" y="1342.1719"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1424.5" y="1401.3047"/><rect fill="#FFFFFF" filter="url(#fmtsofexcks0b)" height="258.9609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1547.5" y="709.75"/><polygon fill="#A80036" points="469.5,130.5625,479.5,134.5625,469.5,138.5625,473.5,134.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="69.5" x2="475.5" y1="134.5625" y2="134.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="76.5" y="121.9302">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="380" x="89.5" y="114.3638">asks to create a freight network importing ports, countries</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="93.5" y="129.4966">and seadists from database</text><polygon fill="#A80036" points="715.5,159.6953,725.5,163.6953,715.5,167.6953,719.5,163.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="491.5" x2="721.5" y1="163.6953" y2="163.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="498.5" y="158.6294">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="511.5" y="158.6294">CreateFreightNetworkFromDb()</text><polygon fill="#A80036" points="1011.5,188.8281,1021.5,192.8281,1011.5,196.8281,1015.5,192.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="1017.5" y1="192.8281" y2="192.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="744.5" y="187.7622">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="254" x="757.5" y="187.7622">countryStoreDb = getCountryStoreDb()</text><polygon fill="#A80036" points="1160.5,247.9609,1170.5,251.9609,1160.5,255.9609,1164.5,251.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="1166.5" y1="251.9609" y2="251.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="744.5" y="246.895">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="403" x="757.5" y="246.895">List&lt;CountryDto&gt; existentCountries = getExistentCountries()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1182.5" x2="1224.5" y1="281.0938" y2="281.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1224.5" x2="1224.5" y1="281.0938" y2="294.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1183.5" x2="1224.5" y1="294.0938" y2="294.0938"/><polygon fill="#A80036" points="1193.5,290.0938,1183.5,294.0938,1193.5,298.0938,1189.5,294.0938" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="1189.5" y="276.0278">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="1202.5" y="276.0278">resultSet = getPortsInDatabase()</text><polygon fill="#A80036" points="748.5,319.2266,738.5,323.2266,748.5,327.2266,744.5,323.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="742.5" x2="1176.5" y1="323.2266" y2="323.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="754.5" y="318.1606">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="767.5" y="318.1606">existentCountries</text><polygon fill="#A80036" points="1011.5,348.3594,1021.5,352.3594,1011.5,356.3594,1015.5,352.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="1017.5" y1="352.3594" y2="352.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="744.5" y="347.2935">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="757.5" y="347.2935">countryStore = getCountryStore()</text><path d="M597.5,397.3594 L661.5,397.3594 L661.5,404.3594 L651.5,414.3594 L597.5,414.3594 L597.5,397.3594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="225.125" style="stroke:#000000;stroke-width:2.0;" width="1946" x="597.5" y="397.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="612.5" y="410.4263">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="265" x="676.5" y="409.5698">[for each countryDto in existentCountries]</text><polygon fill="#A80036" points="1412.5,431.625,1422.5,435.625,1412.5,439.625,1416.5,435.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="1418.5" y1="435.625" y2="435.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="744.5" y="430.5591">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="757.5" y="430.5591">createCountry(countryDto)</text><polygon fill="#A80036" points="2359.5,460.7578,2369.5,464.7578,2359.5,468.7578,2363.5,464.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1434.5" x2="2365.5" y1="464.7578" y2="464.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="1441.5" y="459.6919">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="658" x="1454.5" y="459.6919">capital = create(dto.getCapitalName, dto.getCapitallatitude, dto.getCaitalLon, dto.getCountryName),</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="69" x="2371.5" y="443.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="2378.5" y="463.6201">:Capital</text><polygon fill="#A80036" points="2442.5,506.0547,2452.5,510.0547,2442.5,514.0547,2446.5,510.0547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1434.5" x2="2448.5" y1="510.0547" y2="510.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1441.5" y="504.9888">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="460" x="1463.5" y="504.9888">create(dto.getCountryName, dto.getBorders, dto.getContinent, capital)</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="75" x="2454.5" y="488.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="2461.5" y="508.917">:Country</text><polygon fill="#A80036" points="748.5,551.3516,738.5,555.3516,748.5,559.3516,744.5,555.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="742.5" x2="1428.5" y1="555.3516" y2="555.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="754.5" y="550.2856">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="776.5" y="550.2856">country</text><polygon fill="#A80036" points="1412.5,580.4844,1422.5,584.4844,1412.5,588.4844,1416.5,584.4844" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="1418.5" y1="584.4844" y2="584.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="744.5" y="579.4185">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="766.5" y="579.4185">saveCountry(country)</text><polygon fill="#A80036" points="1011.5,646.6172,1021.5,650.6172,1011.5,654.6172,1015.5,650.6172" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="1017.5" y1="650.6172" y2="650.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="744.5" y="645.5513">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="766.5" y="645.5513">portsStoreDb = getPortStoreDb()</text><polygon fill="#A80036" points="1535.5,705.75,1545.5,709.75,1535.5,713.75,1539.5,709.75" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="1541.5" y1="709.75" y2="709.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="744.5" y="704.6841">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="408" x="766.5" y="704.6841">List&lt;Location&gt; existentPorts = portStoreDb.getExistentPorts()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1557.5" x2="1599.5" y1="738.8828" y2="738.8828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1599.5" x2="1599.5" y1="738.8828" y2="751.8828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1558.5" x2="1599.5" y1="751.8828" y2="751.8828"/><polygon fill="#A80036" points="1568.5,747.8828,1558.5,751.8828,1568.5,755.8828,1564.5,751.8828" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1564.5" y="733.8169">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="1586.5" y="733.8169">resultSet = getPortsInDatabase()</text><path d="M1488,766.8828 L1552,766.8828 L1552,773.8828 L1542,783.8828 L1488,783.8828 L1488,766.8828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="104.5625" style="stroke:#000000;stroke-width:2.0;" width="883.5" x="1488" y="766.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="1503" y="779.9497">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="166" x="1567" y="779.0933">[for each port in resultset]</text><polygon fill="#A80036" points="2298.5,801.1484,2308.5,805.1484,2298.5,809.1484,2302.5,805.1484" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1557.5" x2="2304.5" y1="805.1484" y2="805.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1564.5" y="800.0825">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="707" x="1586.5" y="800.0825">create(continent, country, portCode, portName, latitude, longitude, Map&lt;Integer, Integer&gt; toPortsDistances)</text><rect fill="#FEFECE" filter="url(#fmtsofexcks0b)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="47" x="2310.5" y="784.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="2317.5" y="804.0107">:Port</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1557.5" x2="1599.5" y1="850.4453" y2="850.4453"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1599.5" x2="1599.5" y1="850.4453" y2="863.4453"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1558.5" x2="1599.5" y1="863.4453" y2="863.4453"/><polygon fill="#A80036" points="1568.5,859.4453,1558.5,863.4453,1568.5,867.4453,1564.5,863.4453" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1564.5" y="845.3794">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="1586.5" y="845.3794">existentPorts.add(port)</text><path d="M597.5,885.4453 L661.5,885.4453 L661.5,892.4453 L651.5,902.4453 L597.5,902.4453 L597.5,885.4453 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="76.2656" style="stroke:#000000;stroke-width:2.0;" width="900.5" x="597.5" y="885.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="612.5" y="898.5122">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="194" x="676.5" y="897.6558">[for each port in existentPorts]</text><polygon fill="#A80036" points="1412.5,919.7109,1422.5,923.7109,1412.5,927.7109,1416.5,923.7109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="1418.5" y1="923.7109" y2="923.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="744.5" y="918.645">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="766.5" y="918.645">addPortOfCountry(countryName, port)</text><polygon fill="#A80036" points="1011.5,985.8438,1021.5,989.8438,1011.5,993.8438,1015.5,989.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="1017.5" y1="989.8438" y2="989.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="744.5" y="984.7778">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="766.5" y="984.7778">getFreigthNetwork()</text><polygon fill="#A80036" points="1165.5,1044.9766,1175.5,1048.9766,1165.5,1052.9766,1169.5,1048.9766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="1171.5" y1="1048.9766" y2="1048.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="744.5" y="1043.9106">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="766.5" y="1043.9106">getCountries()</text><path d="M587.5,1063.9766 L651.5,1063.9766 L651.5,1070.9766 L641.5,1080.9766 L587.5,1080.9766 L587.5,1063.9766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="106.5313" style="stroke:#000000;stroke-width:2.0;" width="2022" x="587.5" y="1063.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="602.5" y="1077.0435">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="242" x="666.5" y="1076.187">[for each country inside countries list]</text><polygon fill="#A80036" points="2554.5,1098.2422,2564.5,1102.2422,2554.5,1106.2422,2558.5,1102.2422" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="2560.5" y1="1102.2422" y2="1102.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="744.5" y="1097.1763">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="766.5" y="1097.1763">add(capital)</text><path d="M597.5,1117.2422 L661.5,1117.2422 L661.5,1124.2422 L651.5,1134.2422 L597.5,1134.2422 L597.5,1117.2422 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="2002" x="597.5" y="1117.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="612.5" y="1130.3091">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="159" x="676.5" y="1129.4526">[for each port in country]</text><polygon fill="#A80036" points="2554.5,1151.5078,2564.5,1155.5078,2554.5,1159.5078,2558.5,1155.5078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="2560.5" y1="1155.5078" y2="1155.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="744.5" y="1150.4419">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="766.5" y="1150.4419">add(port)</text><path d="M577.5,1184.5078 L641.5,1184.5078 L641.5,1191.5078 L631.5,1201.5078 L577.5,1201.5078 L577.5,1184.5078 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="375.3281" style="stroke:#000000;stroke-width:2.0;" width="2042" x="577.5" y="1184.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="592.5" y="1197.5747">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="216" x="656.5" y="1196.7183">[for each country in countries list]</text><polygon fill="#A80036" points="1412.5,1218.7734,1422.5,1222.7734,1412.5,1226.7734,1416.5,1222.7734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="1418.5" y1="1222.7734" y2="1222.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="744.5" y="1217.7075">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="362" x="766.5" y="1217.7075">&lt;String, Integer&gt;Map borders =  getBordersDistances()</text><path d="M597.5,1267.7734 L661.5,1267.7734 L661.5,1274.7734 L651.5,1284.7734 L597.5,1284.7734 L597.5,1267.7734 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="2002" x="597.5" y="1267.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="612.5" y="1280.8403">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="174" x="676.5" y="1279.9839">[for each border in borders]</text><polygon fill="#A80036" points="2554.5,1302.0391,2564.5,1306.0391,2554.5,1310.0391,2558.5,1306.0391" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="2560.5" y1="1306.0391" y2="1306.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="744.5" y="1300.9731">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="354" x="766.5" y="1300.9731">addEdge(country.getCapital, border.key, border.value)</text><polygon fill="#A80036" points="1412.5,1338.1719,1422.5,1342.1719,1412.5,1346.1719,1416.5,1342.1719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="1418.5" y1="1342.1719" y2="1342.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="744.5" y="1337.106">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272" x="766.5" y="1337.106">getClosestPortFromCapital(countryName)</text><polygon fill="#A80036" points="1412.5,1397.3047,1422.5,1401.3047,1412.5,1405.3047,1416.5,1401.3047" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="1418.5" y1="1401.3047" y2="1401.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="744.5" y="1396.2388">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="404" x="766.5" y="1396.2388">getLocationsDistance(capital.lat, capital.lon, port.lat, port.lon)</text><polygon fill="#A80036" points="2554.5,1456.4375,2564.5,1460.4375,2554.5,1464.4375,2558.5,1460.4375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="2560.5" y1="1460.4375" y2="1460.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="744.5" y="1455.3716">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="281" x="766.5" y="1455.3716">addEdge(country.Capital, closest.Port, dist)</text><path d="M587.5,1475.4375 L651.5,1475.4375 L651.5,1482.4375 L641.5,1492.4375 L587.5,1492.4375 L587.5,1475.4375 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="77.3984" style="stroke:#000000;stroke-width:2.0;" width="2022" x="587.5" y="1475.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="602.5" y="1488.5044">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="192" x="666.5" y="1487.6479">[for each port in countryPorts]</text><path d="M597.5,1499.5703 L661.5,1499.5703 L661.5,1506.5703 L651.5,1516.5703 L597.5,1516.5703 L597.5,1499.5703 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="2002" x="597.5" y="1499.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="612.5" y="1512.6372">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="178" x="676.5" y="1511.7808">[for each toDistance in port]</text><polygon fill="#A80036" points="2554.5,1533.8359,2564.5,1537.8359,2554.5,1541.8359,2558.5,1537.8359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="737.5" x2="2560.5" y1="1537.8359" y2="1537.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="744.5" y="1532.77">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="288" x="766.5" y="1532.77">addEdge(port, toDistance.key, border.value)</text><polygon fill="#A80036" points="502.5,1583.9688,492.5,1587.9688,502.5,1591.9688,498.5,1587.9688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="496.5" x2="731.5" y1="1587.9688" y2="1587.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="508.5" y="1582.9028">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="530.5" y="1582.9028">result</text><polygon fill="#A80036" points="75.5,1613.1016,65.5,1617.1016,75.5,1621.1016,71.5,1617.1016" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="69.5" x2="485.5" y1="1617.1016" y2="1617.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="81.5" y="1612.0356">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230" x="103.5" y="1612.0356">informs of operation success or fail</text><!--MD5=[f7e8834e754846c265f0092b53054ce0]
@startuml
autonumber
'hide footbox
actor "Traffic Manager" as PM
participant ":CreateFreightNetworkUI  " as UI
participant ":CreateFreightNetworkController" as CTRL
participant ":Company" as CMP
participant ":CountryStoreDb" as CSTORE
participant ":CountryStore" as LSTORE
participant ":PortStoreDb" as STORE
participant ":Port" as PORT
participant ":Capital" as CAP
participant ":Country" as CTRY


activate PM
PM -> UI : asks to create a freight network importing ports, countries\n and seadists from database
activate UI

UI -> CTRL : CreateFreightNetworkFromDb()
activate CTRL
CTRL -> CMP : countryStoreDb = getCountryStoreDb()
activate CMP
deactivate CMP
CTRL -> CSTORE : List<CountryDto> existentCountries = getExistentCountries()
activate CSTORE
CSTORE -> CSTORE: resultSet = getPortsInDatabase()
CSTORE -> CTRL: existentCountries
deactivate CSTORE
CTRL -> CMP : countryStore = getCountryStore()
activate CMP
deactivate CMP
alt for each countryDto in existentCountries
CTRL -> LSTORE : createCountry(countryDto)
activate LSTORE
LSTORE -> CAP** : capital = create(dto.getCapitalName, dto.getCapitallatitude, dto.getCaitalLon, dto.getCountryName),
LSTORE -> CTRY** : create(dto.getCountryName, dto.getBorders, dto.getContinent, capital)
LSTORE -> CTRL : country
deactivate LSTORE
CTRL -> LSTORE: saveCountry(country)
activate LSTORE
deactivate LSTORE
end
deactivate CSTORE
CTRL -> CMP : portsStoreDb = getPortStoreDb()
activate CMP
deactivate CMP
CTRL -> STORE : List<Location> existentPorts = portStoreDb.getExistentPorts()
activate STORE
STORE -> STORE: resultSet = getPortsInDatabase()
alt for each port in resultset
STORE -> PORT** : create(continent, country, portCode, portName, latitude, longitude, Map<Integer, Integer> toPortsDistances)
STORE -> STORE : existentPorts.add(port)
end
alt for each port in existentPorts
CTRL -> LSTORE : addPortOfCountry(countryName, port)
activate LSTORE
deactivate LSTORE
end
deactivate STORE
CTRL -> CMP : getFreigthNetwork()
activate CMP
deactivate CMP
CTRL -> CSTORE : getCountries()
alt for each country inside countries list
CTRL -> NET : add(capital)
alt for each port in country
CTRL -> NET : add(port)
end
end
alt for each country in countries list
CTRL -> LSTORE : <String, Integer>Map borders =  getBordersDistances()
activate LSTORE
deactivate LSTORE
alt for each border in borders
CTRL -> NET : addEdge(country.getCapital, border.key, border.value)
end
CTRL -> LSTORE: getClosestPortFromCapital(countryName)
activate LSTORE
deactivate LSTORE
CTRL -> LSTORE: getLocationsDistance(capital.lat, capital.lon, port.lat, port.lon)
activate LSTORE
deactivate LSTORE
CTRL -> NET : addEdge(country.Capital, closest.Port, dist)
alt for each port in countryPorts
alt for each toDistance in port
CTRL -> NET : addEdge(port, toDistance.key, border.value)
end
end
end
CTRL - -> UI : result
deactivate CTRL
UI - -> PM : informs of operation success or fail
deactivate UI
deactivate PM

@enduml

@startuml
autonumber
actor "Traffic Manager" as PM
participant ":CreateFreightNetworkUI  " as UI
participant ":CreateFreightNetworkController" as CTRL
participant ":Company" as CMP
participant ":CountryStoreDb" as CSTORE
participant ":CountryStore" as LSTORE
participant ":PortStoreDb" as STORE
participant ":Port" as PORT
participant ":Capital" as CAP
participant ":Country" as CTRY


activate PM
PM -> UI : asks to create a freight network importing ports, countries\n and seadists from database
activate UI

UI -> CTRL : CreateFreightNetworkFromDb()
activate CTRL
CTRL -> CMP : countryStoreDb = getCountryStoreDb()
activate CMP
deactivate CMP
CTRL -> CSTORE : List<CountryDto> existentCountries = getExistentCountries()
activate CSTORE
CSTORE -> CSTORE: resultSet = getPortsInDatabase()
CSTORE -> CTRL: existentCountries
deactivate CSTORE
CTRL -> CMP : countryStore = getCountryStore()
activate CMP
deactivate CMP
alt for each countryDto in existentCountries
CTRL -> LSTORE : createCountry(countryDto)
activate LSTORE
LSTORE -> CAP** : capital = create(dto.getCapitalName, dto.getCapitallatitude, dto.getCaitalLon, dto.getCountryName),
LSTORE -> CTRY** : create(dto.getCountryName, dto.getBorders, dto.getContinent, capital)
LSTORE -> CTRL : country
deactivate LSTORE
CTRL -> LSTORE: saveCountry(country)
activate LSTORE
deactivate LSTORE
end
deactivate CSTORE
CTRL -> CMP : portsStoreDb = getPortStoreDb()
activate CMP
deactivate CMP
CTRL -> STORE : List<Location> existentPorts = portStoreDb.getExistentPorts()
activate STORE
STORE -> STORE: resultSet = getPortsInDatabase()
alt for each port in resultset
STORE -> PORT** : create(continent, country, portCode, portName, latitude, longitude, Map<Integer, Integer> toPortsDistances)
STORE -> STORE : existentPorts.add(port)
end
alt for each port in existentPorts
CTRL -> LSTORE : addPortOfCountry(countryName, port)
activate LSTORE
deactivate LSTORE
end
deactivate STORE
CTRL -> CMP : getFreigthNetwork()
activate CMP
deactivate CMP
CTRL -> CSTORE : getCountries()
alt for each country inside countries list
CTRL -> NET : add(capital)
alt for each port in country
CTRL -> NET : add(port)
end
end
alt for each country in countries list
CTRL -> LSTORE : <String, Integer>Map borders =  getBordersDistances()
activate LSTORE
deactivate LSTORE
alt for each border in borders
CTRL -> NET : addEdge(country.getCapital, border.key, border.value)
end
CTRL -> LSTORE: getClosestPortFromCapital(countryName)
activate LSTORE
deactivate LSTORE
CTRL -> LSTORE: getLocationsDistance(capital.lat, capital.lon, port.lat, port.lon)
activate LSTORE
deactivate LSTORE
CTRL -> NET : addEdge(country.Capital, closest.Port, dist)
alt for each port in countryPorts
alt for each toDistance in port
CTRL -> NET : addEdge(port, toDistance.key, border.value)
end
end
end
CTRL - -> UI : result
deactivate CTRL
UI - -> PM : informs of operation success or fail
deactivate UI
deactivate PM

@enduml

PlantUML version 1.2021.11(Sat Oct 02 14:26:11 WEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>