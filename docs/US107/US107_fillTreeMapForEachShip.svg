<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="940px" preserveAspectRatio="none" style="width:1555px;height:940px;background:#FFFFFF;" version="1.1" viewBox="0 0 1555 940" width="1555px" zoomAndPan="magnify"><defs><filter height="300%" id="fl0r75v97o6mh" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="961" x="294.75" y="30.6855">SD_fillTreeMapForEachShip(listShipsWithIntendedTD, infoPair, travelledDistance, positionsBST, ship1MMSI, indexShip)</text><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="693.2734" style="stroke:#A80036;stroke-width:1.0;" width="10" x="425" y="144.5625"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="659" y="260.6172"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="759" y="406.6719"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="759" y="492.375"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="759" y="578.0781"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="878" y="320.9688"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="878" y="638.4297"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1032.5" y="200.2656"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1221" y="771.8359"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="671.2734" style="stroke:#000000;stroke-width:2.0;" width="1118.5" x="238" y="159.5625"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="457.8672" style="stroke:#000000;stroke-width:2.0;" width="1098.5" x="248" y="365.9688"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="365.1641" style="stroke:#000000;stroke-width:2.0;" width="1078.5" x="258" y="451.6719"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="272.4609" style="stroke:#000000;stroke-width:2.0;" width="1058.5" x="268" y="537.375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="430" x2="430" y1="95.8594" y2="878.1875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="504" x2="504" y1="95.8594" y2="878.1875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="664" x2="664" y1="95.8594" y2="878.1875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="763.5" x2="763.5" y1="95.8594" y2="878.1875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="882.5" x2="882.5" y1="95.8594" y2="878.1875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1037.5" x2="1037.5" y1="95.8594" y2="878.1875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1225.5" x2="1225.5" y1="95.8594" y2="878.1875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1435.5" x2="1435.5" y1="95.8594" y2="878.1875"/><rect fill="#FEFECE" filter="url(#fl0r75v97o6mh)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="76" x="390" y="59.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="397" y="80.7832">ShipsBST</text><rect fill="#FEFECE" filter="url(#fl0r75v97o6mh)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="76" x="390" y="877.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="397" y="898.7207">ShipsBST</text><rect fill="#FEFECE" filter="url(#fl0r75v97o6mh)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="44" x="480" y="41.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="487" y="63.1738">ship:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="488" y="80.7832">Ship</text><rect fill="#FEFECE" filter="url(#fl0r75v97o6mh)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="44" x="480" y="877.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="487" y="898.7207">ship:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="488" y="916.3301">Ship</text><rect fill="#FEFECE" filter="url(#fl0r75v97o6mh)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="48" x="638" y="41.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="645" y="63.1738">ship2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="648" y="80.7832">Ship</text><rect fill="#FEFECE" filter="url(#fl0r75v97o6mh)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="48" x="638" y="877.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="645" y="898.7207">ship2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="648" y="916.3301">Ship</text><rect fill="#FEFECE" filter="url(#fl0r75v97o6mh)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="101" x="711.5" y="41.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="718.5" y="63.1738">positionsBST:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="720" y="80.7832">PositionsBST</text><rect fill="#FEFECE" filter="url(#fl0r75v97o6mh)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="101" x="711.5" y="877.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="718.5" y="898.7207">positionsBST:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="720" y="916.3301">PositionsBST</text><rect fill="#FEFECE" filter="url(#fl0r75v97o6mh)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="109" x="826.5" y="41.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="833.5" y="63.1738">positionsBST2:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="839" y="80.7832">PositionsBST</text><rect fill="#FEFECE" filter="url(#fl0r75v97o6mh)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="109" x="826.5" y="877.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="833.5" y="898.7207">positionsBST2:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="839" y="916.3301">PositionsBST</text><rect fill="#FEFECE" filter="url(#fl0r75v97o6mh)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="172" x="949.5" y="41.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="956.5" y="63.1738">listShipsWithIntendedTD:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="1002.5" y="80.7832">List&lt;Ship&gt;</text><rect fill="#FEFECE" filter="url(#fl0r75v97o6mh)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="172" x="949.5" y="877.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="956.5" y="898.7207">listShipsWithIntendedTD:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="1002.5" y="916.3301">List&lt;Ship&gt;</text><rect fill="#FEFECE" filter="url(#fl0r75v97o6mh)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="177" x="1135.5" y="41.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="1198" y="63.1738">infoPair:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="1142.5" y="80.7832">TreeMap&lt;Double, String&gt;</text><rect fill="#FEFECE" filter="url(#fl0r75v97o6mh)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="177" x="1135.5" y="877.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="1198" y="898.7207">infoPair:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="1142.5" y="916.3301">TreeMap&lt;Double, String&gt;</text><rect fill="#FEFECE" filter="url(#fl0r75v97o6mh)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="215" x="1326.5" y="41.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="1382.5" y="63.1738">listPairsOfShips:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="201" x="1333.5" y="80.7832">List&lt;TreeMap&lt;Double, String&gt;&gt;</text><rect fill="#FEFECE" filter="url(#fl0r75v97o6mh)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="215" x="1326.5" y="877.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="1382.5" y="898.7207">listPairsOfShips:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="201" x="1333.5" y="916.3301">List&lt;TreeMap&lt;Double, String&gt;&gt;</text><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="693.2734" style="stroke:#A80036;stroke-width:1.0;" width="10" x="425" y="144.5625"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="659" y="260.6172"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="759" y="406.6719"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="759" y="492.375"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="759" y="578.0781"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="878" y="320.9688"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="878" y="638.4297"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1032.5" y="200.2656"/><rect fill="#FFFFFF" filter="url(#fl0r75v97o6mh)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1221" y="771.8359"/><ellipse cx="7.5" cy="143.8125" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="413,140.5625,423,144.5625,413,148.5625,417,144.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="12" x2="419" y1="144.5625" y2="144.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="310" x="15" y="123.3545">getMyRegressionModel(regressionModel, bestXIndex,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="398" x="15" y="139.7061">covidTestsArray, meanAgeArray, observedPositives, historicalPoints)</text><path d="M238,159.5625 L311,159.5625 L311,167.5625 L301,177.5625 L238,177.5625 L238,159.5625 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="671.2734" style="stroke:#000000;stroke-width:2.0;" width="1118.5" x="238" y="159.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="253" y="174.0576">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="287" x="326" y="172.9814">[for each Ship after ship in listShipsWithIntendedTD]</text><polygon fill="#A80036" points="1020.5,196.2656,1030.5,200.2656,1020.5,204.2656,1024.5,200.2656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="435" x2="1026.5" y1="200.2656" y2="200.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="442" y="195.4092">ship2 = get(j)</text><polygon fill="#A80036" points="647,256.6172,657,260.6172,647,264.6172,651,260.6172" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="435" x2="653" y1="260.6172" y2="260.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="442" y="255.7607">positionsBST2 = getPositionsBST()</text><polygon fill="#A80036" points="866,316.9688,876,320.9688,866,324.9688,870,320.9688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="435" x2="872" y1="320.9688" y2="320.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="442" y="316.1123">travelledDistance2 = getTotalDistance()</text><path d="M248,365.9688 L309,365.9688 L309,373.9688 L299,383.9688 L248,383.9688 L248,365.9688 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="457.8672" style="stroke:#000000;stroke-width:2.0;" width="1098.5" x="248" y="365.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="263" y="380.4639">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="219" x="324" y="379.3877">[travelledDistance != travelledDistance2]</text><polygon fill="#A80036" points="747,402.6719,757,406.6719,747,410.6719,751,406.6719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="435" x2="753" y1="406.6719" y2="406.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="442" y="401.8154">arrivalDistance = getArrivalDistance(positionsBST2)</text><path d="M258,451.6719 L319,451.6719 L319,459.6719 L309,469.6719 L258,469.6719 L258,451.6719 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="365.1641" style="stroke:#000000;stroke-width:2.0;" width="1078.5" x="258" y="451.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="273" y="466.167">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="113" x="334" y="465.0908">[arrivalDistance &lt;= 5]</text><polygon fill="#A80036" points="747,488.375,757,492.375,747,496.375,751,492.375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="435" x2="753" y1="492.375" y2="492.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="305" x="442" y="487.5186">depDistance = getDepartureDistance(positionsBST2)</text><path d="M268,537.375 L329,537.375 L329,545.375 L319,555.375 L268,555.375 L268,537.375 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="272.4609" style="stroke:#000000;stroke-width:2.0;" width="1058.5" x="268" y="537.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="283" y="551.8701">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="94" x="344" y="550.7939">[depDistance &lt; 5]</text><polygon fill="#A80036" points="747,574.0781,757,578.0781,747,582.0781,751,578.0781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="435" x2="753" y1="578.0781" y2="578.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="442" y="573.2217">numMovs = size()</text><polygon fill="#A80036" points="866,634.4297,876,638.4297,866,642.4297,870,638.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="435" x2="872" y1="638.4297" y2="638.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="442" y="633.5732">numMovs2 = size()</text><path d="M278,681.4297 L278,740.4297 L651,740.4297 L651,691.4297 L641,681.4297 L278,681.4297 " fill="#FBFB77" filter="url(#fl0r75v97o6mh)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M641,681.4297 L641,691.4297 L651,691.4297 L641,681.4297 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="284" y="699.9248">The</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="71" x="309" y="699.9248">diffTravDist</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="384" y="699.9248">is the module of the difference</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="284" y="716.2764">between the Travelled Distances.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="284" y="732.6279">The</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="309" y="732.6279">allInfo</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="283" x="353" y="732.6279">is a string containing the necessary info to show.</text><polygon fill="#A80036" points="1209,767.8359,1219,771.8359,1209,775.8359,1213,771.8359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="435" x2="1215" y1="771.8359" y2="771.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="442" y="766.9795">put(diffTravDist, allInfo)</text><polygon fill="#A80036" points="11,856.1875,1,860.1875,11,864.1875,7,860.1875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="429" y1="860.1875" y2="860.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="17" y="855.3311">result</text><!--MD5=[ebacdf3e3424944c89300f19aa50d7f8]
@startuml

title SD_fillTreeMapForEachShip(listShipsWithIntendedTD, infoPair, travelledDistance, positionsBST, ship1MMSI, indexShip)

participant "ShipsBST" as BstShip
participant "ship:\nShip" as S
participant "ship2\nShip" as S2
/'participant "ShipPosition" as SP'/
participant "positionsBST:\nPositionsBST" as BstPosition
participant "positionsBST2:\nPositionsBST" as BstPosition2
participant "listShipsWithIntendedTD:\nList<Ship>" as ITERATOR
participant "infoPair:\nTreeMap<Double, String>" as TREEMAP
participant "listPairsOfShips:\nList<TreeMap<Double, String>>" as LIST


[o-> BstShip : getMyRegressionModel(regressionModel, bestXIndex, \ncovidTestsArray, meanAgeArray, observedPositives, historicalPoints)

activate BstShip
loop for each Ship after ship in listShipsWithIntendedTD
BstShip -> ITERATOR : ship2 = get(j)
activate ITERATOR
deactivate ITERATOR
BstShip -> S2 : positionsBST2 = getPositionsBST()
activate S2
deactivate S2
BstShip -> BstPosition2 : travelledDistance2 = getTotalDistance()
activate BstPosition2
deactivate BstPosition2
/'BstShip -> S2 : travelledDistance2 = getTravelledDistance()
activate S2
deactivate S2'/
/'alteração alt em baixo: && travelledDistance2 >= 10'/
/'alt travelledDistance != travelledDistance2 && travelledDistance2 >= 10'/
alt travelledDistance != travelledDistance2
/'BstShip -> BstPosition : arrivalLat = getArrivalLatitude()
activate BstPosition
deactivate BstPosition
BstShip -> BstPosition : arrivalLog = getArrivalLongitude()
activate BstPosition
deactivate BstPosition
BstShip -> BstPosition2 : arrivalLat2 = getArrivalLatitude()
activate BstPosition2
deactivate BstPosition2
BstShip -> BstPosition2 : arrivalLog2 = getArrivalLongitude()
activate BstPosition2
deactivate BstPosition2
BstShip -> BstPosition : arrivalDistance = distanceBetweenInKm(arrivalLat, arrivalLat2, arrivalLog, arrivalLog2)'/
BstShip -> BstPosition : arrivalDistance = getArrivalDistance(positionsBST2)
activate BstPosition
deactivate BstPosition
alt arrivalDistance <= 5
/'BstShip -> BstPosition : depLat = getDeparLatitude()
activate BstPosition
deactivate BstPosition
BstShip -> BstPosition : depLog = getDepartLongitude()
activate BstPosition
deactivate BstPosition
BstShip -> BstPosition2 : depLat2 = getDepartLatitude()
activate BstPosition2
deactivate BstPosition2
BstShip -> BstPosition2 : depLog2 = getDepartLongitude()
activate BstPosition2
deactivate BstPosition2
BstShip -> BstPosition : depDistance = distanceBetweenInKm(depLat, depLat2, depLog, depLog2)
activate BstPosition
deactivate BstPosition'/
BstShip -> BstPosition : depDistance = getDepartureDistance(positionsBST2)
activate BstPosition
deactivate BstPosition
alt depDistance < 5

BstShip -> BstPosition : numMovs = size()
activate BstPosition
deactivate BstPosition
BstShip -> BstPosition2 : numMovs2 = size()
activate BstPosition2
deactivate BstPosition2

note over BstShip, S
The **diffTravDist** is the module of the difference
between the Travelled Distances.
The **allInfo** is a string containing the necessary info to show.
end note

BstShip -> TREEMAP : put(diffTravDist, allInfo)
activate TREEMAP
deactivate TREEMAP
end
end
end
end
deactivate BstShip

[<- - BstShip : result

@enduml

@startuml

title SD_fillTreeMapForEachShip(listShipsWithIntendedTD, infoPair, travelledDistance, positionsBST, ship1MMSI, indexShip)

participant "ShipsBST" as BstShip
participant "ship:\nShip" as S
participant "ship2\nShip" as S2
participant "positionsBST:\nPositionsBST" as BstPosition
participant "positionsBST2:\nPositionsBST" as BstPosition2
participant "listShipsWithIntendedTD:\nList<Ship>" as ITERATOR
participant "infoPair:\nTreeMap<Double, String>" as TREEMAP
participant "listPairsOfShips:\nList<TreeMap<Double, String>>" as LIST


[o-> BstShip : getMyRegressionModel(regressionModel, bestXIndex, \ncovidTestsArray, meanAgeArray, observedPositives, historicalPoints)

activate BstShip
loop for each Ship after ship in listShipsWithIntendedTD
BstShip -> ITERATOR : ship2 = get(j)
activate ITERATOR
deactivate ITERATOR
BstShip -> S2 : positionsBST2 = getPositionsBST()
activate S2
deactivate S2
BstShip -> BstPosition2 : travelledDistance2 = getTotalDistance()
activate BstPosition2
deactivate BstPosition2
alt travelledDistance != travelledDistance2
BstShip -> BstPosition : arrivalDistance = getArrivalDistance(positionsBST2)
activate BstPosition
deactivate BstPosition
alt arrivalDistance <= 5
BstShip -> BstPosition : depDistance = getDepartureDistance(positionsBST2)
activate BstPosition
deactivate BstPosition
alt depDistance < 5

BstShip -> BstPosition : numMovs = size()
activate BstPosition
deactivate BstPosition
BstShip -> BstPosition2 : numMovs2 = size()
activate BstPosition2
deactivate BstPosition2

note over BstShip, S
The **diffTravDist** is the module of the difference
between the Travelled Distances.
The **allInfo** is a string containing the necessary info to show.
end note

BstShip -> TREEMAP : put(diffTravDist, allInfo)
activate TREEMAP
deactivate TREEMAP
end
end
end
end
deactivate BstShip

[<- - BstShip : result

@enduml

PlantUML version 1.2021.11(Sat Oct 02 14:26:11 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>